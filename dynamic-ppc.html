<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>动态生产可能性曲线</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1, h2 {
            color: #2c3e50;
        }
        h1 {
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            width: 100%;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            min-width: 200px;
        }
        label {
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="range"] {
            width: 100%;
        }
        .value-display {
            text-align: center;
            margin-top: 5px;
            font-size: 0.9em;
            color: #666;
        }
        .svg-container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }
        .explanation {
            margin-top: 30px;
            padding: 15px;
            background-color: #f1f8ff;
            border-left: 3px solid #3498db;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        .scenario-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .point {
            cursor: pointer;
        }
        .point-label {
            font-size: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>动态生产可能性曲线</h1>
    
    <div class="container">
        <h2>交互式生产可能性曲线</h2>
        
        <div class="scenario-buttons">
            <button id="btn-normal">基本曲线</button>
            <button id="btn-growth">经济增长</button>
            <button id="btn-recession">经济衰退</button>
            <button id="btn-tech-a">商品A技术进步</button>
            <button id="btn-tech-b">商品B技术进步</button>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label for="curvature">曲线弯曲度（机会成本递增程度）</label>
                <input type="range" id="curvature" min="0.1" max="2" step="0.1" value="1">
                <div class="value-display" id="curvature-value">1</div>
            </div>
            
            <div class="control-group">
                <label for="max-a">商品A最大产量</label>
                <input type="range" id="max-a" min="50" max="200" step="10" value="100">
                <div class="value-display" id="max-a-value">100</div>
            </div>
            
            <div class="control-group">
                <label for="max-b">商品B最大产量</label>
                <input type="range" id="max-b" min="50" max="200" step="10" value="100">
                <div class="value-display" id="max-b-value">100</div>
            </div>
        </div>
        
        <div class="svg-container" id="ppc-container">
            <svg id="ppc-svg" width="600" height="400" xmlns="http://www.w3.org/2000/svg">
                <!-- SVG内容将由JavaScript动态生成 -->
            </svg>
        </div>
        
        <div class="explanation" id="current-explanation">
            <p><strong>当前状态：</strong>基本生产可能性曲线</p>
            <p>生产可能性曲线表示在给定资源和技术条件下，一个经济体系能够生产的两种产品的最大可能组合。曲线上的每一点都代表资源得到充分有效利用的状态。</p>
            <p>曲线的形状（向原点凹）反映了机会成本递增原理：随着一种产品产量的增加，生产每增加一单位该产品所需放弃的另一种产品的数量会越来越多。</p>
            <p><strong>交互提示：</strong>尝试调整滑块来改变曲线形状，或点击不同的场景按钮查看经济变化。您还可以点击曲线上的点查看详细信息。</p>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const svg = document.getElementById('ppc-svg');
        const curvatureSlider = document.getElementById('curvature');
        const maxASlider = document.getElementById('max-a');
        const maxBSlider = document.getElementById('max-b');
        const curvatureValue = document.getElementById('curvature-value');
        const maxAValue = document.getElementById('max-a-value');
        const maxBValue = document.getElementById('max-b-value');
        const currentExplanation = document.getElementById('current-explanation');
        
        // 按钮元素
        const btnNormal = document.getElementById('btn-normal');
        const btnGrowth = document.getElementById('btn-growth');
        const btnRecession = document.getElementById('btn-recession');
        const btnTechA = document.getElementById('btn-tech-a');
        const btnTechB = document.getElementById('btn-tech-b');
        
        // 初始参数
        let params = {
            curvature: 1,
            maxA: 100,
            maxB: 100,
            currentCurve: 'normal',
            selectedPoint: null
        };
        
        // 更新显示的值
        function updateDisplayValues() {
            curvatureValue.textContent = params.curvature;
            maxAValue.textContent = params.maxA;
            maxBValue.textContent = params.maxB;
        }
        
        // 生成曲线路径
        function generateCurvePath(maxA, maxB, curvature, curveType = 'normal') {
            let path = `M 50,${350 - maxB * 1.5}`;
            
            // 基础曲线参数
            let baseMaxA = maxA * 1.5;
            let baseMaxB = maxB * 1.5;
            
            // 根据曲线类型调整参数
            let adjustedMaxA = baseMaxA;
            let adjustedMaxB = baseMaxB;
            
            switch(curveType) {
                case 'growth':
                    adjustedMaxA = baseMaxA * 1.3;
                    adjustedMaxB = baseMaxB * 1.3;
                    break;
                case 'recession':
                    adjustedMaxA = baseMaxA * 0.7;
                    adjustedMaxB = baseMaxB * 0.7;
                    break;
                case 'tech-a':
                    adjustedMaxA = baseMaxA * 1.5;
                    adjustedMaxB = baseMaxB * 1.1;
                    break;
                case 'tech-b':
                    adjustedMaxA = baseMaxA * 1.1;
                    adjustedMaxB = baseMaxB * 1.5;
                    break;
            }
            
            // 生成曲线点
            const points = [];
            const numPoints = 50;
            
            for (let i = 0; i <= numPoints; i++) {
                const t = i / numPoints;
                const x = 50 + adjustedMaxA * t;
                
                // 使用幂函数来控制曲线形状
                // 较高的曲率值会使曲线更加弯曲（更凹）
                const y = 350 - adjustedMaxB * Math.pow(1 - t, curvature);
                
                points.push({x, y});
            }
            
            // 构建SVG路径
            let pathD = `M ${points[0].x},${points[0].y}`;
            
            for (let i = 1; i < points.length; i++) {
                pathD += ` L ${points[i].x},${points[i].y}`;
            }
            
            return {
                pathD,
                points: points.filter((_, i) => i % 10 === 0 || i === points.length - 1) // 选择一些关键点
            };
        }
        
        // 绘制坐标轴
        function drawAxes() {
            // 清除SVG内容
            svg.innerHTML = '';
            
            // 坐标轴
            const xAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            xAxis.setAttribute('x1', '50');
            xAxis.setAttribute('y1', '350');
            xAxis.setAttribute('x2', '550');
            xAxis.setAttribute('y2', '350');
            xAxis.setAttribute('stroke', 'black');
            xAxis.setAttribute('stroke-width', '2');
            svg.appendChild(xAxis);
            
            const yAxis = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            yAxis.setAttribute('x1', '50');
            yAxis.setAttribute('y1', '50');
            yAxis.setAttribute('x2', '50');
            yAxis.setAttribute('y2', '350');
            yAxis.setAttribute('stroke', 'black');
            yAxis.setAttribute('stroke-width', '2');
            svg.appendChild(yAxis);
            
            // 坐标轴箭头
            const xArrow = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            xArrow.setAttribute('points', '550,350 540,345 540,355');
            xArrow.setAttribute('fill', 'black');
            svg.appendChild(xArrow);
            
            const yArrow = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
            yArrow.setAttribute('points', '50,50 45,60 55,60');
            yArrow.setAttribute('fill', 'black');
            svg.appendChild(yArrow);
            
            // 坐标轴标签
            const xLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            xLabel.setAttribute('x', '300');
            xLabel.setAttribute('y', '380');
            xLabel.setAttribute('text-anchor', 'middle');
            xLabel.setAttribute('font-family', 'Arial');
            xLabel.setAttribute('font-size', '16');
            xLabel.textContent = '商品A';
            svg.appendChild(xLabel);
            
            const yLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            yLabel.setAttribute('x', '20');
            yLabel.setAttribute('y', '200');
            yLabel.setAttribute('text-anchor', 'middle');
            yLabel.setAttribute('font-family', 'Arial');
            yLabel.setAttribute('font-size', '16');
            yLabel.setAttribute('transform', 'rotate(-90, 20, 200)');
            yLabel.textContent = '商品B';
            svg.appendChild(yLabel);
            
            // 刻度
            for (let i = 0; i <= 5; i++) {
                const xPos = 50 + i * 100;
                const yPos = 350;
                
                const xTick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                xTick.setAttribute('x1', xPos);
                xTick.setAttribute('y1', yPos);
                xTick.setAttribute('x2', xPos);
                xTick.setAttribute('y2', yPos + 5);
                xTick.setAttribute('stroke', 'black');
                xTick.setAttribute('stroke-width', '1');
                svg.appendChild(xTick);
                
                const xTickLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                xTickLabel.setAttribute('x', xPos);
                xTickLabel.setAttribute('y', yPos + 20);
                xTickLabel.setAttribute('text-anchor', 'middle');
                xTickLabel.setAttribute('font-family', 'Arial');
                xTickLabel.setAttribute('font-size', '12');
                xTickLabel.textContent = i * (params.maxA / 3);
                svg.appendChild(xTickLabel);
            }
            
            for (let i = 0; i <= 5; i++) {
                const xPos = 50;
                const yPos = 350 - i * 60;
                
                const yTick = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                yTick.setAttribute('x1', xPos);
                yTick.setAttribute('y1', yPos);
                yTick.setAttribute('x2', xPos - 5);
                yTick.setAttribute('y2', yPos);
                yTick.setAttribute('stroke', 'black');
                yTick.setAttribute('stroke-width', '1');
                svg.appendChild(yTick);
                
                const yTickLabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                yTickLabel.setAttribute('x', xPos - 10);
                yTickLabel.setAttribute('y', yPos + 5);
                yTickLabel.setAttribute('text-anchor', 'end');
                yTickLabel.setAttribute('font-family', 'Arial');
                yTickLabel.setAttribute('font-size', '12');
                yTickLabel.textContent = i * (params.maxB / 3);
                svg.appendChild(yTickLabel);
            }
        }
        
        // 绘制曲线
        function drawCurve() {
            drawAxes();
            
            // 生成曲线路径
            const { pathD, points } = generateCurvePath(
                params.maxA, 
                params.maxB, 
                params.curvature, 
                params.currentCurve
            );
            
            // 创建并添加路径元素
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('d', pathD);
            path.setAttribute('fill', 'none');
            path.setAttribute('stroke', '#3498db');
            path.setAttribute('stroke-width', '3');
            svg.appendChild(path);
            
            // 添加曲线上的点
            points.forEach((point, index) => {
                const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                circle.setAttribute('cx', point.x);
                circle.setAttribute('cy', point.y);
                circle.setAttribute('r', '5');
                circle.setAttribute('fill', '#e74c3c');
                circle.setAttribute('class', 'point');
                circle.setAttribute('data-index', index);
                circle.setAttribute('data-x', Math.round((point.x - 50) / 1.5));
                circle.setAttribute('data-y', Math.round((350 - point.y) / 1.5));
                
                // 添加点击事件
                circle.addEventListener('click', function() {
                    const pointIndex = this.getAttribute('data-index');
                    const pointX = this.getAttribute('data-x');
                    const pointY = this.getAttribute('data-y');
                    showPointInfo(pointIndex, pointX, pointY, point.x, point.y);
                });
                
                svg.appendChild(circle);
                
                // 如果是选中的点，添加标签
                if (params.selectedPoint === index) {
                    const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                    label.setAttribute('x', point.x + 10);
                    label.setAttribute('y', point.y - 10);
                    label.setAttribute('font-family', 'Arial');
                    label.setAttribute('font-size', '12');
                    label.setAttribute('class', 'point-label');
                    label.textContent = `(${Math.round((point.x - 50) / 1.5)}, ${Math.round((350 - point.y) / 1.5)})`;
                    svg.appendChild(label);
                }
            });
            
            // 添加图例
            const legend = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            legend.setAttribute('transform', 'translate(400, 80)');
            
            const legendTitle = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            legendTitle.setAttribute('x', '0');
            legendTitle.setAttribute('y', '0');
            legendTitle.setAttribute('font-family', 'Arial');
            legendTitle.setAttribute('font-size', '14');
            legendTitle.setAttribute('font-weight', 'bold');
            legendTitle.textContent = '图例:';
            legend.appendChild(legendTitle);
            
            const legendLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            legendLine.setAttribute('x1', '0');
            legendLine.setAttribute('y1', '20');
            legendLine.setAttribute('x2', '30');
            legendLine.setAttribute('y2', '20');
            legendLine.setAttribute('stroke', '#3498db');
            legendLine.setAttribute('stroke-width', '3');
            legend.appendChild(legendLine);
            
            const legendText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            legendText.setAttribute('x', '40');
            legendText.setAttribute('y', '25');
            legendText.setAttribute('font-family', 'Arial');
            legendText.setAttribute('font-size', '12');
            
            switch(params.currentCurve) {
                case 'normal':
                    legendText.textContent = '基本曲线';
                    break;
                case 'growth':
                    legendText.textContent = '经济增长';
                    break;
                case 'recession':
                    legendText.textContent = '经济衰退';
                    break;
                case 'tech-a':
                    legendText.textContent = '商品A技术进步';
                    break;
                case 'tech-b':
                    legendText.textContent = '商品B技术进步';
                    break;
            }
            
            legend.appendChild(legendText);
            svg.appendChild(legend);
        }
        
        // 显示点信息
        function showPointInfo(index, x, y, svgX, svgY) {
            params.selectedPoint = parseInt(index);
            
            // 更新说明文本
            let explanation = '';
            
            if (index == 0) {
                explanation = `<p><strong>点 (${x}, ${y})</strong></p>
                <p>这是生产可能性曲线与Y轴的交点，表示所有资源都用于生产商品B的情况。在这一点上：</p>
                <ul>
                    <li>商品A产量：0</li>
                    <li>商品B产量：${y}</li>
                    <li>机会成本：此时增加一单位商品A的机会成本最低</li>
                </ul>`;
            } else if (index == 4) { // 假设4是最后一个点
                explanation = `<p><strong>点 (${x}, ${y})</strong></p>
                <p>这是生产可能性曲线与X轴的交点，表示所有资源都用于生产商品A的情况。在这一点上：</p>
                <ul>
                    <li>商品A产量：${x}</li>
                    <li>商品B产量：0</li>
                    <li>机会成本：此时增加一单位商品B的机会成本最低</li>
                </ul>`;
            } else {
                explanation = `<p><strong>点 (${x}, ${y})</strong></p>
                <p>这是生产可能性曲线上的一个点，表示资源得到充分有效利用的状态。在这一点上：</p>
                <ul>
                    <li>商品A产量：${x}</li>
                    <li>商品B产量：${y}</li>
                    <li>机会成本：曲线在此点的斜率的绝对值</li>
                </ul>
                <p>如果要增加商品A的产量，需要减少商品B的产量，反之亦然。这体现了经济选择的权衡关系。</p>`;
            }
            
            currentExplanation.innerHTML = explanation;
            
            // 重绘曲线以显示选中的点
            drawCurve();
        }
        
        // 更新曲线解释
        function updateExplanation() {
            let explanation = '';
            
            switch(params.currentCurve) {
                case 'normal':
                    explanation = `<p><strong>当前状态：</strong>基本生产可能性曲线</p>
                    <p>生产可能性曲线表示在给定资源和技术条件下，一个经济体系能够生产的两种产品的最大可能组合。曲线上的每一点都代表资源得到充分有效利用的状态。</p>
                    <p>曲线的形状（向原点凹）反映了机会成本递增原理：随着一种产品产量的增加，生产每增加一单位该产品所需放弃的另一种产品的数量会越来越多。</p>`;
                    break;
                case 'growth':
                    explanation = `<p><strong>当前状态：</strong>经济增长</p>
                    <p>经济增长导致生产可能性曲线整体向外移动，表示经济体系的生产能力提高。这可能由以下因素引起：</p>
                    <ul>
                        <li>资源数量增加（如人口增长、资本积累）</li>
                        <li>技术进步提高生产效率</li>
                        <li>制度改进优化资源配置</li>
                    </ul>
                    <p>经济增长使得社会能够生产更多的商品A和商品B，扩大了经济选择的可能性范围。</p>`;
                    break;
                case 'recession':
                    explanation = `<p><strong>当前状态：</strong>经济衰退</p>
                    <p>经济衰退导致生产可能性曲线整体向内移动，表示经济体系的生产能力下降。这可能由以下因素引起：</p>
                    <ul>
                        <li>资源减少（如人口减少、资本损失）</li>
                        <li>自然灾害破坏生产资源</li>
                        <li>战争或社会动荡</li>
                    </ul>
                    <p>经济衰退限制了社会能够生产的商品A和商品B的数量，缩小了经济选择的可能性范围。</p>`;
                    break;
                case 'tech-a':
                    explanation = `<p><strong>当前状态：</strong>商品A技术进步</p>
                    <p>商品A生产技术的进步导致生产可能性曲线非对称移动，在商品A轴方向上扩展更多。这表示：</p>
                    <ul>
                        <li>在不减少商品B产量的情况下，可以生产更多的商品A</li>
                        <li>技术进步集中在商品A的生产领域</li>
                        <li>商品A的相对生产效率提高</li>
                    </ul>
                    <p>这种情况在现实中可能对应于某个特定产业的技术突破，如农业技术革命或工业自动化。</p>`;
                    break;
                case 'tech-b':
                    explanation = `<p><strong>当前状态：</strong>商品B技术进步</p>
                    <p>商品B生产技术的进步导致生产可能性曲线非对称移动，在商品B轴方向上扩展更多。这表示：</p>
                    <ul>
                        <li>在不减少商品A产量的情况下，可以生产更多的商品B</li>
                        <li>技术进步集中在商品B的生产领域</li>
                        <li>商品B的相对生产效率提高</li>
                    </ul>
                    <p>这种情况在现实中可能对应于某个特定产业的技术突破，如服务业数字化或医疗技术进步。</p>`;
                    break;
            }
            
            explanation += `<p><strong>交互提示：</strong>尝试调整滑块来改变曲线形状，或点击不同的场景按钮查看经济变化。您还可以点击曲线上的点查看详细信息。</p>`;
            
            currentExplanation.innerHTML = explanation;
        }
        
        // 初始化函数
        function init() {
            // 设置初始值
            curvatureSlider.value = params.curvature;
            maxASlider.value = params.maxA;
            maxBSlider.value = params.maxB;
            updateDisplayValues();
            
            // 绘制初始曲线
            drawCurve();
            updateExplanation();
            
            // 添加事件监听器
            curvatureSlider.addEventListener('input', function() {
                params.curvature = parseFloat(this.value);
                updateDisplayValues();
                drawCurve();
            });
            
            maxASlider.addEventListener('input', function() {
                params.maxA = parseInt(this.value);
                updateDisplayValues();
                drawCurve();
            });
            
            maxBSlider.addEventListener('input', function() {
                params.maxB = parseInt(this.value);
                updateDisplayValues();
                drawCurve();
            });
            
            // 场景按钮事件
            btnNormal.addEventListener('click', function() {
                params.currentCurve = 'normal';
                params.selectedPoint = null;
                updateExplanation();
                drawCurve();
            });
            
            btnGrowth.addEventListener('click', function() {
                params.currentCurve = 'growth';
                params.selectedPoint = null;
                updateExplanation();
                drawCurve();
            });
            
            btnRecession.addEventListener('click', function() {
                params.currentCurve = 'recession';
                params.selectedPoint = null;
                updateExplanation();
                drawCurve();
            });
            
            btnTechA.addEventListener('click', function() {
                params.currentCurve = 'tech-a';
                params.selectedPoint = null;
                updateExplanation();
                drawCurve();
            });
            
            btnTechB.addEventListener('click', function() {
                params.currentCurve = 'tech-b';
                params.selectedPoint = null;
                updateExplanation();
                drawCurve();
            });
        }
        
        // 初始化
        init();
    </script>
</body>
</html>